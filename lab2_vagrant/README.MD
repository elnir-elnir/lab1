# Выполнение лабораторной работы № 2 Создание и запуск сценариев Vagrant

## Настройка виртуального окружения с Vagrant

### Подготовка к запуску

1. Измените ваш `Vagrantfile` на `Vagrantfile`, который находится в настоящем репозитории, или скопируйте `Vagrantfile` из настоящего репозитория в новую директорию

2. Создайте директорию `provision` в той же директории, где находится новый `Vagrantfile`:
   ```bash
   mkdir provision
   ```

2. Скопируйте следующие файлы в созданную директорию `provision`:
   - `db_setup.sql`
   - `wb_setup.sh`
   - `db_setup.sh`
   - `lb_setup.sh`

### Запуск виртуальной машины

После выполнения подготовительных шагов выполните:
```bash
vagrant up
```

## Назначение provision-файлов

- `db_setup.sql` - SQL-скрипт для настройки базы данных  
- `wb_setup.sh` - скрипт для настройки веб-сервера (создает файл `/var/www/html/test_db.php`)
- `db_setup.sh` - скрипт для настройки сервера базы данных (изменяет область видимости MySQL-сервера - выполняет замену значения для *bind-address* в файле `/etc/mysql/mysql.conf.d/mysqld.cnf`)
- `lb_setup.sh` - скрипт для настройки балансировщика нагрузки (дополняет файл `/etc/haproxy/haproxy.cfg`)